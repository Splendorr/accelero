(function(b,c,l){function h(a,g){this.element=a;this.$element=b(a);var j={},k=this.$element.data(),e;for(e in k)if(d.hasOwnProperty(e)&&typeof("string"===d[e])||typeof("number"===d[e])||typeof("boolean"===d[e]))j[e]=k[e];this.options=b.extend({},d,j,g);this._defaults=d;this._name=f;this.supported={motion:"undefined"!==typeof c.DeviceMotionEvent,orientation:"undefined"!==typeof c.DeviceOrientationEvent,touch:"ontouchstart"in c||"undefined"!==typeof navigator.msMaxTouchPoints,mouse:"onmousemove"in c};
this.timer=null;this.motion={x:0,y:0,z:0,ax:0,ay:0,az:0,vx:0,vy:0,vz:0,max_x:0,max_y:0,new_top:0,new_left:0};this.init()}var f="accelero",d={debug:!1,speed:1,scale:1,gravityRatio:0.98,bounceRatio:0.5,controlMethod:"auto",debugElement:".accelero-debug-wrapper",containerElement:l.documentElement};h.prototype={init:function(){var a=this;if(this.options.debug&&0===b(this.options.debugElement).length){var g=this.options.debugElement.replace(".","").replace("#","");b("body").append('<div class="'+g+'"></div>');
b(this.options.debugElement).append('<div class="accelero-debug acceleration-x">Acceleration X: <span></span>g</div>');b(this.options.debugElement).append('<div class="accelero-debug acceleration-y">Acceleration Y: <span></span>g</div>');b(this.options.debugElement).append('<div class="accelero-debug acceleration-z">Acceleration Z: <span></span>g</div>')}if(1!==this.options.scale){var g=Math.ceil(this.$element.width()*this.options.scale),d=Math.ceil(this.$element.height()*this.options.scale);this.$element.css({width:g+
"px",height:d+"px"})}if(c.DeviceMotionEvent&&("auto"==this.options.controlMethod||"motion"==this.options.controlMethod))c.ondevicemotion=function(b){a.motion.ax=5*b.accelerationIncludingGravity.x;a.motion.ay=5*b.accelerationIncludingGravity.y;a.motion.az=5*b.accelerationIncludingGravity.z},clearInterval(this.timer),this.timer=setInterval(b.proxy(a._track,a),25);else if(c.DeviceOrientationEvent&&("auto"==this.options.controlMethod||"orientation"==this.options.controlMethod))c.addEventListener("deviceorientation",
function(b){a.motion.ax=b.beta;a.motion.ay=b.gamma;a.motion.az=b.alpha},!1),clearInterval(this.timer),this.timer=setInterval(b.proxy(a._track,a),25);else if("auto"==this.options.controlMethod||"mouse"==this.options.controlMethod)a=this,b(this.options.containerElement).mousemove(function(c){a.motion.new_top=c.pageY-(b(a.options.containerElement).offset().top+b(a.element).height()/2);a.motion.new_left=c.pageX-(b(a.options.containerElement).offset().left+b(a.element).width()/2);a.motion.x+=(a.motion.new_left-
a.motion.x)/(12/a.options.speed);a.motion.y+=(a.motion.new_top-a.motion.y)/(12/a.options.speed)}),clearInterval(this.timer),this.timer=setInterval(b.proxy(a._track,a),25)},_track:function(){this.options.debug&&(b(".acceleration-x span").html(this.motion.ax),b(".acceleration-y span").html(this.motion.ay),b(".acceleration-z span").html(this.motion.az));this.$element.data("acceleration-x",this.motion.ax);this.$element.data("acceleration-y",this.motion.ay);this.$element.data("acceleration-z",this.motion.az);
this._move()},_move:function(){var a=!0,d=!1;if("undefined"!==typeof c.orientation){a=!1;if(90===c.orientation||-90===c.orientation)a=!0;if(90===c.orientation||180===c.orientation)d=!0}this.motion.max_x=b(this.options.containerElement).width()-this.$element.width();this.motion.max_y=b(this.options.containerElement).height()-this.$element.height();a?(this.motion.vx=Math.ceil(this.motion.vx+this.motion.ay*this.options.speed),this.motion.vy=Math.ceil(this.motion.vy+this.motion.ax*this.options.speed)):
(this.motion.vy=Math.ceil(this.motion.vy-this.motion.ay*this.options.speed),this.motion.vx=Math.ceil(this.motion.vx+this.motion.ax*this.options.speed));this.motion.vx=Math.ceil(this.motion.vx*this.options.gravityRatio);this.motion.vy=Math.ceil(this.motion.vy*this.options.gravityRatio);d?(this.motion.x=Math.ceil(parseInt(this.motion.x-this.motion.vx/this.$element.width(),10)),this.motion.y=Math.ceil(parseInt(this.motion.y-this.motion.vy/this.$element.height(),10))):(this.motion.x=Math.ceil(parseInt(this.motion.x+
this.motion.vx/this.$element.width(),10)),this.motion.y=Math.ceil(parseInt(this.motion.y+this.motion.vy/this.$element.height(),10)));this._boundingBoxCheck();this.$element.css("transform","translate3d("+this.motion.x+"px, "+this.motion.y+"px, 0)")},_boundingBoxCheck:function(){0>this.motion.x&&(this.motion.x=0,this.motion.vx=-Math.ceil(this.motion.vx*this.options.bounceRatio));0>this.motion.y&&(this.motion.y=0,this.motion.vy=-Math.ceil(this.motion.vy*this.options.bounceRatio));this.motion.x>=this.motion.max_x&&
(this.motion.x=this.motion.max_x,this.motion.vx=-Math.ceil(this.motion.vx*this.options.bounceRatio));this.motion.y>=this.motion.max_y&&(this.motion.y=this.motion.max_y,this.motion.vy=-Math.ceil(this.motion.vy*this.options.bounceRatio));this.motion.x==this.motion.max_x-1&&(this.motion.x=this.motion.max_x);this.motion.y==this.motion.max_y-1&&(this.motion.y=this.motion.max_y)}};b.fn[f]=function(a){return this.each(function(){b.data(this,"plugin_"+f)||b.data(this,"plugin_"+f,new h(this,a))})};b(function(){b("."+
f)[f]()})})(jQuery,window,document);
